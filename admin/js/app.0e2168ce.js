(function(e){function t(t){for(var o,n,a=t[0],c=t[1],h=t[2],l=0,u=[];l<a.length;l++)n=a[l],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,h||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],o=!0,n=1;n<s.length;n++){var c=s[n];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var o={},i={1:0},r=[];function n(e){return a.p+"js/"+({}[e]||e)+"."+{2:"6522e8a5",3:"6337bbd4",4:"37d78942",5:"2e135e2f"}[e]+".js"}function a(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.e=function(e){var t=[],s=i[e];if(0!==s)if(s)t.push(s[2]);else{var o=new Promise((function(t,o){s=i[e]=[t,o]}));t.push(s[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=n(e);var h=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(l);var s=i[e];if(0!==s){if(s){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",h.name="ChunkLoadError",h.type=o,h.request=r,s[1](h)}i[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(s,o,function(t){return e[t]}.bind(null,o));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],h=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=h;r.push([0,0]),s()})({0:function(e,t,s){e.exports=s("2f39")},"0047":function(e,t,s){var o=s("d35b");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=s("499e").default;i("d8ef322a",o,!0,{sourceMap:!1})},"2f39":function(e,t,s){"use strict";s.r(t);var o={};s.r(o),s.d(o,"getField",(function(){return f["a"]}));var i={};s.r(i),s.d(i,"updateField",(function(){return f["d"]}));var r={};s.r(r),s.d(r,"getField",(function(){return f["a"]}));var n={};s.r(n),s.d(n,"updateField",(function(){return f["d"]}));s("e6cf"),s("5319"),s("7d6e"),s("e54f"),s("985d"),s("0047");var a=s("2b0e"),c=s("1f91"),h=s("42d2"),l=s("b05d"),d=s("2a19");a["a"].use(l["a"],{config:{},lang:c["a"],iconSet:h["a"],plugins:{Notify:d["a"]}});var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.loaded?o("div",{attrs:{id:"q-app"}},[o("router-view")],1):o("div",{staticClass:"fixed-center"},[o("q-circular-progress",{staticClass:"q-ma-md",attrs:{indeterminate:"","show-value":"","font-size":"10px",size:"300px",thickness:.15,color:"light-blue-7","track-color":"grey-3"}},[o("q-avatar",{attrs:{size:"200px"}},[o("img",{attrs:{src:s("9d7a")}})])],1)],1)])},m=[],p=s("ded3"),g=s.n(p),b=s("2f62"),f=s("5935");const _={computed:g()({},Object(f["b"])("app",["changed","connected","loaded","isConfigurationError","errorText"]))};var w=s("9446"),y={name:"App",mixins:[_,w["a"]],methods:g()({},Object(b["b"])("app",["updateField"])),watch:{native:{handler(){const e=this.$connection.getIsChanged();this.updateField({path:"changed",value:e})},deep:!0},errorText(e){if(e){const t=g()({message:e},{type:"negative",timeout:3e3,position:"top",classes:"glossy"});this.$q.notify(t),this.updateField({path:"errorText",value:""})}}},beforeCreate(){this.$q.dark.set("auto"),window.addEventListener("onhashchange",this.$connection.onHashChangedBound)},beforeDestroy(){window.removeEventListener("onhashchange",this.$connection.onHashChangedBound)}},j=y,v=s("2877"),S=s("58ea"),k=s("cb32"),C=s("eebe"),P=s.n(C),O=Object(v["a"])(j,u,m,!1,null,null,null),E=O.exports;P()(O,"components",{QCircularProgress:S["a"],QAvatar:k["a"]});var T=function(){return{changed:!1,connected:!1,loaded:!1,isConfigurationError:"",errorText:""}},L=s("e048"),N={namespaced:!0,state:T,getters:o,mutations:i,actions:L},I=function(){return{native:{}}},F=s("4dd9"),H={namespaced:!0,state:I,getters:r,mutations:n,actions:F};a["a"].use(b["a"]);var A=function(){const e=new b["a"].Store({modules:{app:N,template:H},strict:!1});return e},x=s("8c4f");const R=[{path:"/",component:()=>Promise.all([s.e(0),s.e(2)]).then(s.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([s.e(0),s.e(3)]).then(s.bind(null,"bc13"))},{path:"adressen",component:()=>Promise.all([s.e(0),s.e(4)]).then(s.bind(null,"28d7"))}]},{path:"*",component:()=>s.e(5).then(s.bind(null,"e51e"))}];var $=R;a["a"].use(x["a"]);var B=function(){const e=new x["a"]({scrollBehavior:()=>({x:0,y:0}),routes:$,mode:"hash",base:""});return e},D=async function(){const e="function"===typeof A?await A({Vue:a["a"]}):A,t="function"===typeof B?await B({Vue:a["a"],store:e}):B;e.$router=t;const s={router:t,store:e,render:e=>e(E),el:"#q-app"};return{app:s,store:e,router:t}},J=s("a925"),V={readme:"readme",save:"save",close:"close","save and close":"save and close",cancel:"cancel","load configuration from file":"load configuration from file","save configuration to file":"save configuration to file",otherConfig:"The selected configuration belongs to the adapter: {msg}","Listen on all IPs":"Listen on all IPs",ra_filter_func:"Function",ra_filter_id:"ID",ra_filter_name:"Name",ra_filter_type:"Type",ra_filter_customs:"Settings",ra_filter_role:"Role",ra_filter_room:"Room",ra_tooltip_ack:"Acknowledged flag",ra_tooltip_from:"From",ra_tooltip_lc:"Last changed",ra_tooltip_quality:"Quality",ra_tooltip_ts:"Time stamp",ra_tooltip_user:"User",ra_tooltip_value:"Value",ra_tooltip_copyState:"Copy the state value",ra_tooltip_customConfig:"Custom settings",ra_tooltip_deleteObject:"Delete object",ra_tooltip_editObject:"Edit object",ra_tooltip_editState:"Edit the state value"},q={readme:"readme",save:"speichern",close:"schließen","save and close":"speichern und schließen",cancel:"abbrechen","load configuration from file":"Laden Sie die Konfiguration aus der Datei","save configuration to file":"Speichern Sie die Konfiguration in der Datei",otherConfig:"Die gewählte Konfiguration gehört zu dem Adapter: {msg}","Listen on all IPs":"Hören Sie auf alle IPs",ra_filter_func:"Funktion",ra_filter_id:"ID",ra_filter_name:"Name",ra_filter_type:"Typ",ra_filter_customs:"Einstellungen",ra_filter_role:"Rolle",ra_filter_room:"Zimmer",ra_tooltip_ack:"Bestätigte Flagge",ra_tooltip_from:"Von",ra_tooltip_lc:"Zuletzt geändert",ra_tooltip_quality:"Qualität",ra_tooltip_ts:"Zeitstempel",ra_tooltip_user:"Nutzer",ra_tooltip_value:"Wert",ra_tooltip_copyState:"Kopieren Sie den Statuswert",ra_tooltip_customConfig:"Benutzerdefinierte Einstellungen",ra_tooltip_deleteObject:"Objekt löschen",ra_tooltip_editObject:"Objekt bearbeiten",ra_tooltip_editState:"Bearbeiten Sie den Statuswert"},G={en:V,de:q};a["a"].use(J["a"]);const M=new J["a"]({locale:"en",fallbackLocale:"en",messages:G});var Y=({app:e})=>{e.i18n=M};s("fb6a"),s("498a"),s("c975"),s("a434"),s("ace4"),s("5cc6"),s("ddb0");const W={CONNECTING:0,CONNECTED:1,OBJECTS_LOADED:2,READY:3},z="permissionError",K="notConnectedError";class U{constructor(e){e=e||{},this.props=e,this.autoSubscribes=this.props.autoSubscribes||[],this.autoSubscribeLog=this.props.autoSubscribeLog,this.props.protocol=this.props.protocol||window.location.protocol,this.props.host=this.props.host||window.location.hostname,this.props.port=this.props.port||("8080"===window.location.port?8081:window.location.port),this.props.ioTimeout=Math.max(this.props.ioTimeout||2e4,2e4),this.doNotLoadAllObjects=void 0===this.props.doNotLoadAllObjects||this.props.doNotLoadAllObjects,this.states={},this.objects=null,this.acl=null,this.firstConnect=!0,this.waitForRestart=!1,this.systemLang="en",this.connected=!1,this.statesSubscribes={},this.objectsSubscribes={},this.onProgress=this.props.onProgress||function(){},this.onError=this.props.onError||function(e){console.error(e)},this.loaded=!1,this.loadTimer=null,this.loadCounter=0,this.certPromise=null,this.onConnectionHandlers=[],this.onLogHandlers=[],this._promises={},this.startSocket()}startSocket(){if("undefined"!==typeof window.io)this._socket||(this._socket=window.io.connect(`${this.props.protocol.replace(":","")}://${this.props.host}:${this.props.port}`,{query:"ws=true",name:this.props.name,timeout:this.props.ioTimeout}),this._socket.on("connect",(e=>{!0!==e?setTimeout((()=>this.getAdminVersion().then((e=>{const[t,s,o]=e.split("."),i=1e4*parseInt(t,10)+100*parseInt(s,10)+parseInt(o,10);i<40102?(this._authTimer=null,this.onPreConnect(!1,!1)):this._socket.emit("authenticate",((e,t)=>this.onPreConnect(e,t)))}))),500):this._socket.emit("authenticate",((e,t)=>this.onPreConnect(e,t)))})),this._socket.on("reconnect",(()=>{this.connected=!0,this.waitForRestart?window.location.reload():(this._subscribe(!0),this.onConnectionHandlers.forEach((e=>e(!0))))})),this._socket.on("disconnect",(()=>{this.connected=!1,this.subscribed=!1,this.onProgress(W.CONNECTING),this.onConnectionHandlers.forEach((e=>e(!1)))})),this._socket.on("reconnect",(()=>{this.onProgress(W.READY),this.waitForRestart&&window.location.reload()})),this._socket.on("reauthenticate",(()=>this.authenticate())),this._socket.on("log",(e=>{this.props.onLog&&this.props.onLog(e),this.onLogHandlers.forEach((t=>t(e)))})),this._socket.on("error",(e=>{let t=e||"";"function"!==typeof t.toString&&(t=JSON.stringify(t),console.error("Received strange error: "+t)),t=t.toString(),-1!==t.indexOf("User not authorized")?this.authenticate():window.alert("Socket Error: "+e)})),this._socket.on("connect_error",(e=>console.error("Connect error: "+e))),this._socket.on("permissionError",(e=>this.onError({message:"no permission",operation:e.operation,type:e.type,id:e.id||""}))),this._socket.on("objectChange",((e,t)=>setTimeout((()=>this.objectChange(e,t)),0))),this._socket.on("stateChange",((e,t)=>setTimeout((()=>this.stateChange(e,t)),0))),this._socket.on("cmdStdout",((e,t)=>this.onCmdStdoutHandler&&this.onCmdStdoutHandler(e,t))),this._socket.on("cmdStderr",((e,t)=>this.onCmdStderrHandler&&this.onCmdStderrHandler(e,t))),this._socket.on("cmdExit",((e,t)=>this.onCmdExitHandler&&this.onCmdExitHandler(e,t))));else if("function"!==typeof window.registerSocketOnLoad){if(this.scriptLoadCounter=this.scriptLoadCounter||0,this.scriptLoadCounter++,this.scriptLoadCounter<30)return setTimeout((()=>this.startSocket()),100);window.alert("Cannot load socket.io.js!")}else window.registerSocketOnLoad((()=>this.startSocket()))}onPreConnect(e,t){this._authTimer&&(clearTimeout(this._authTimer),this._authTimer=null),this.connected=!0,this.isSecure=t,this.waitForRestart?window.location.reload():(this.firstConnect?(this.loadTimer=setTimeout((()=>{this.loadTimer=null,this.loadCounter++,this.loadCounter<10&&this.onConnect()}),1e3),this.loaded||this.onConnect()):this.onProgress(W.READY),this._subscribe(!0),this.onConnectionHandlers.forEach((e=>e(!0))))}isConnected(){return this.connected}onConnect(){this._socket.emit("getUserPermissions",((e,t)=>{this.loaded||(this.loaded=!0,clearTimeout(this.loadTimer),this.loadTimer=null,this.onProgress(W.CONNECTED),this.firstConnect=!1,this.acl=t,this._socket.emit("getObject","system.config",((e,t)=>{this.systemConfig=t,!e&&this.systemConfig&&this.systemConfig.common?this.systemLang=this.systemConfig.common.language:(this.systemLang=window.navigator.userLanguage||window.navigator.language,"en"!==this.systemLang&&"de"!==this.systemLang&&"ru"!==this.systemLang&&(this.systemConfig.common.language="en",this.systemLang="en")),this.props.onLanguage&&this.props.onLanguage(this.systemLang),this.doNotLoadAllObjects?(this.objects={"system.config":t},this.onProgress(W.READY),this.props.onReady&&this.props.onReady(this.objects)):this.getObjects().then((()=>{this.onProgress(W.READY),this.props.onReady&&this.props.onReady(this.objects)}))})))}))}authenticate(){window.location=`${window.location.protocol}//${window.location.host}${window.location.pathname}?login&href=${window.location.search}${window.location.hash}`}subscribeState(e,t,s){if("function"===typeof t&&(s=t,t=!1),this.statesSubscribes[e])-1===this.statesSubscribes[e].cbs.indexOf(s)&&this.statesSubscribes[e].cbs.push(s);else{let t=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\+/g,"\\+").replace(/\[/g,"\\[");-1===t.indexOf("*")&&(t+="$"),this.statesSubscribes[e]={reg:new RegExp(t),cbs:[]},this.statesSubscribes[e].cbs.push(s),this.connected&&this._socket.emit("subscribe",e)}"function"===typeof s&&this.connected&&(t?this.getBinaryState(e).then((t=>setTimeout((()=>s(e,t))))).catch((t=>console.error(`Cannot getForeignStates "${e}": ${JSON.stringify(t)}`))):this._socket.emit("getForeignStates",e,((t,o)=>{t&&console.error(`Cannot getForeignStates "${e}": ${JSON.stringify(t)}`),o&&Object.keys(o).forEach((e=>setTimeout((()=>s(e,o[e])))))})))}unsubscribeState(e,t){if(this.statesSubscribes[e]){if(t){const s=this.statesSubscribes[e].cbs.indexOf(t);-1!==s&&this.statesSubscribes[e].cbs.splice(s,1)}else this.statesSubscribes[e].cbs=null;this.statesSubscribes[e].cbs&&this.statesSubscribes[e].cbs.length||(delete this.statesSubscribes[e],this.connected&&this._socket.emit("unsubscribe",e))}}subscribeObject(e,t){if(this.objectsSubscribes[e])!this.objectsSubscribes[e].cbs.includes(t)&&this.objectsSubscribes[e].cbs.push(t);else{let s=e.replace(/\./g,"\\.").replace(/\*/g,".*");-1===s.indexOf("*")&&(s+="$"),this.objectsSubscribes[e]={reg:new RegExp(s),cbs:[]},this.objectsSubscribes[e].cbs.push(t),this.connected&&this._socket.emit("subscribeObjects",e)}return Promise.resolve()}unsubscribeObject(e,t){if(this.objectsSubscribes[e]){if(t){const s=this.objectsSubscribes[e].cbs.indexOf(t);-1!==s&&this.objectsSubscribes[e].cbs.splice(s,1)}else this.objectsSubscribes[e].cbs=null;!this.connected||this.objectsSubscribes[e].cbs&&this.objectsSubscribes[e].cbs.length||(delete this.objectsSubscribes[e],this.connected&&this._socket.emit("unsubscribeObjects",e))}return Promise.resolve()}objectChange(e,t){if(!this.objects)return;let s,o=!1;t?(t._rev&&this.objects[e]&&(this.objects[e]._rev=t._rev),this.objects[e]&&(s={_id:e,type:this.objects[e].type}),this.objects[e]&&JSON.stringify(this.objects[e])===JSON.stringify(t)||(this.objects[e]=t,o=!0)):this.objects[e]&&(s={_id:e,type:this.objects[e].type},delete this.objects[e],o=!0),Object.keys(this.objectsSubscribes).forEach((o=>{(o===e||this.objectsSubscribes[o].reg.test(e))&&this.objectsSubscribes[o].cbs.forEach((o=>o(e,t,s)))})),this.props.onBlocklyChanges&&e.match(/^system\.adapter\.[-\w\d]+\$/)&&t[e].common&&t[e].common.blockly&&this.props.onBlocklyChanges(e),o&&this.props.onObjectChange&&this.props.onObjectChange(this.objects)}stateChange(e,t){for(const s in this.statesSubscribes)this.statesSubscribes.hasOwnProperty(s)&&this.statesSubscribes[s].reg.test(e)&&this.statesSubscribes[s].cbs.forEach((s=>s(e,t)))}getStates(e){return this.connected?new Promise(((t,s)=>this._socket.emit("getStates",((o,i)=>(this.states=i,!e&&this.onProgress(W.STATES_LOADED),o?s(o):t(this.states)))))):Promise.reject(K)}getState(e){return this.connected?new Promise(((t,s)=>this._socket.emit("getState",e,((e,o)=>e?s(e):t(o))))):Promise.reject(K)}getBinaryState(e){return this.connected?new Promise(((t,s)=>this._socket.emit("getBinaryState",e,((e,o)=>e?s(e):t(o))))):Promise.reject(K)}setBinaryState(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("setBinaryState",e,t,(e=>e?o(e):s())))):Promise.reject(K)}setState(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("setState",e,t,(e=>e?o(e):s())))):Promise.reject(K)}getObjects(e,t){if("function"!==typeof e)return this.connected?new Promise(((s,o)=>{if(!e&&this.objects)return s(this.objects);this._socket.emit("getAllObjects",((e,i)=>{this.objects=i,t&&this.onProgress(W.OBJECTS_LOADED),e?o(e):s(this.objects)}))})):Promise.reject(K);{const s=e;this.connected?this.objects&&Object.keys(this.objects).length>2?setTimeout((()=>s(this.objects)),100):this._socket.emit("getAllObjects",((e,o)=>{this.objects=o||{},t&&this.onProgress(W.OBJECTS_LOADED),s(this.objects)})):(console.error(K),s())}}_subscribe(e){e&&!this.subscribed?(this.subscribed=!0,this.autoSubscribes.forEach((e=>this._socket.emit("subscribeObjects",e))),Object.keys(this.objectsSubscribes).forEach((e=>this._socket.emit("subscribeObjects",e))),this.autoSubscribeLog&&this._socket.emit("requireLog",!0),Object.keys(this.statesSubscribes).forEach((e=>this._socket.emit("subscribe",e)))):!e&&this.subscribed&&(this.subscribed=!1,this.autoSubscribes.forEach((e=>this._socket.emit("unsubscribeObjects",e))),Object.keys(this.objectsSubscribes).forEach((e=>this._socket.emit("unsubscribeObjects",e))),this.autoSubscribeLog&&this._socket.emit("requireLog",!1),Object.keys(this.statesSubscribes).forEach((e=>this._socket.emit("unsubscribe",e))))}requireLog(e){return this.connected?new Promise(((t,s)=>this._socket.emit("requireLog",e,(e=>e?s(e):t())))):Promise.reject(K)}delObject(e){return this.connected?new Promise(((t,s)=>this._socket.emit("delObject",e,(e=>{e?s(e):t()})))):Promise.reject(K)}setObject(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("setObject",e,t,(e=>{e?o(e):s()})))):Promise.reject(K)}getObject(e){return this.connected?new Promise(((t,s)=>this._socket.emit("getObject",e,((e,o)=>e?s(e):t(o))))):Promise.reject(K)}getAdapterInstances(e,t){return"boolean"===typeof e&&(t=e,e=""),e=e||"",!t&&this._promises["instances"+e]?this._promises["instances"+e]:this.connected?(this._promises["instances"+e]=this._promises["instances"+e]||new Promise(((t,s)=>{this._socket.emit("getObjectView","system","instance",{startkey:"system.adapter."+(e||""),endkey:`system.adapter.${e?e+".":""}香`},((e,o)=>{e?s(e):t(o.rows.map((e=>e.value)))}))})),this._promises["instances"+e]):Promise.reject(K)}_renameGroups(e,t){if(e&&e.length){const s=e.pop();this.delObject(s._id).then((()=>(s._id=s.newId,delete s.newId,this.setObject(s._id,s)))).then((()=>setTimeout((()=>this._renameGroups(e,t)),0))).catch((e=>t&&t(e)))}else t&&t()}renameGroup(e,t,s){return this.getGroups(!0).then((o=>{if(o.length){const i=o.filter((t=>t._id.startsWith(e+"."))).forEach((s=>s.newId=t+s._id.substring(e.length)));return new Promise(((e,t)=>this._renameGroups(i,(s=>s?t(s):e())))).then((()=>{const i=o.find((t=>t._id===e));if(i)return i._id=t,void 0!==s&&(i.common=i.common||{},i.common.name=s),this.setObject(i._id,i)}))}}))}sendTo(e,t,s){return this.connected?new Promise((o=>this._socket.emit("sendTo",e,t,s,(e=>o(e))))):Promise.reject(K)}extendObject(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("extendObject",e,t,(e=>e?o(e):s())))):Promise.reject(K)}registerLogHandler(e){!this.onLogHandlers.includes(e)&&this.onLogHandlers.push(e)}unregisterLogHandler(e){const t=this.onLogHandlers.indexOf(e);-1!==t&&this.onLogHandlers.splice(t,1)}registerConnectionHandler(e){!this.onConnectionHandlers.includes(e)&&this.onConnectionHandlers.push(e)}unregisterConnectionHandler(e){const t=this.onConnectionHandlers.indexOf(e);-1!==t&&this.onConnectionHandlers.splice(t,1)}registerCmdStdoutHandler(e){this.onCmdStdoutHandler=e}unregisterCmdStdoutHandler(e){this.onCmdStdoutHandler=null}registerCmdStderrHandler(e){this.onCmdStderrHandler=e}unregisterCmdStderrHandler(e){this.onCmdStderrHandler=null}registerCmdExitHandler(e){this.onCmdExitHandler=e}unregisterCmdExitHandler(e){this.onCmdExitHandler=null}getEnums(e,t){return!t&&this._promises["enums_"+(e||"all")]?this._promises["enums_"+(e||"all")]:this.connected?(this._promises["enums_"+(e||"all")]=new Promise(((t,s)=>{this._socket.emit("getObjectView","system","enum",{startkey:"enum."+(e||""),endkey:`enum.${e?e+".":""}香`},((o,i)=>{if(!o&&i){const s={};for(let t=0;t<i.rows.length;t++)e&&i.rows[t].id==="enum."+e||(s[i.rows[t].id]=i.rows[t].value);t(s)}else s(o)}))})),this._promises["enums_"+(e||"all")]):Promise.reject(K)}getObjectView(e,t,s){return this.connected?new Promise(((o,i)=>{this._socket.emit("getObjectView","system",s,{startkey:e,endkey:t},((e,t)=>{if(e)i(e);else{const e={};if(t&&t.rows)for(let s=0;s<t.rows.length;s++)e[t.rows[s].id]=t.rows[s].value;o(e)}}))})):Promise.reject(K)}getCertificates(e){return this._promises.cert&&!e?this._promises.cert:this.connected?(this._promises.cert=this.getObject("system.certificates").then((e=>{const t=[];return e&&e.native&&e.native.certificates&&Object.keys(e.native.certificates).forEach((s=>{const o=e.native.certificates[s];if(!o)return;const i={name:s,type:""};if(o.length<700&&(-1!==o.indexOf("/")||-1!==o.indexOf("\\")))s.toLowerCase().includes("private")||o.toLowerCase().includes("private")?i.type="private":(s.toLowerCase().includes("public")||o.toLowerCase().includes("public"))&&(i.type="public"),t.push(i);else{if(i.type="-----BEGIN RSA PRIVATE KEY"===o.substring(0,"-----BEGIN RSA PRIVATE KEY".length)||"-----BEGIN PRIVATE KEY"===o.substring(0,"-----BEGIN PRIVATE KEY".length)?"private":"public","public"===i.type){const e=o.split("-----END CERTIFICATE-----");e.filter((e=>e.replace(/\r\n|\r|\n/,"").trim())).length>1&&(i.type="chained")}t.push(i)}})),t})),this._promises.cert):Promise.reject(K)}getLogs(e,t){return this.connected?new Promise((s=>this._socket.emit("sendToHost",e,"getLogs",t||200,(e=>s(e))))):Promise.reject(K)}getLogsFiles(){return this.connected?new Promise(((e,t)=>this._socket.emit("readLogs",((s,o)=>s?t(s):e(o))))):Promise.reject(K)}delLogs(e){return this.connected?new Promise(((t,s)=>this._socket.emit("sendToHost",e,"delLogs",null,(e=>e?s(e):t())))):Promise.reject(K)}readMetaItems(){return this.connected?new Promise(((e,t)=>this._socket.emit("getObjectView","system","meta",{startkey:"",endkey:"香"},((s,o)=>s?t(s):e(o.rows&&o.rows.map((e=>e.value))))))):Promise.reject(K)}readDir(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("readDir",e,t,((e,t)=>e?o(e):s(t))))):Promise.reject(K)}writeFile64(e,t,s){return this.connected?new Promise(((o,i)=>{if("string"===typeof s)this._socket.emit("writeFile",e,t,s,(e=>e?i(e):o()));else{const r=btoa(new Uint8Array(s).reduce(((e,t)=>e+String.fromCharCode(t)),""));this._socket.emit("writeFile64",e,t,r,(e=>e?i(e):o()))}})):Promise.reject(K)}deleteFile(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("deleteFile",e,t,(e=>e?o(e):s())))):Promise.reject(K)}getHosts(e){return!e&&this._promises.hosts?this._promises.hosts:this.connected?(this._promises.hosts=new Promise(((e,t)=>this._socket.emit("getObjectView","system","host",{startkey:"system.host.",endkey:"system.host.香"},((s,o)=>{s?t(s):e(o.rows.map((e=>e.value)))})))),this._promises.hosts):Promise.reject(K)}getUsers(e){return!e&&this._promises.users?this._promises.users:this.connected?(this._promises.users=new Promise(((e,t)=>this._socket.emit("getObjectView","system","user",{startkey:"system.user.",endkey:"system.user.香"},((s,o)=>{s?t(s):e(o.rows.map((e=>e.value)))})))),this._promises.users):Promise.reject(K)}getGroups(e){return!e&&this._promises.groups?this._promises.groups:this.connected?(this._promises.groups=new Promise(((e,t)=>this._socket.emit("getObjectView","system","group",{startkey:"system.group.",endkey:"system.group.香"},((s,o)=>{s?t(s):e(o.rows.map((e=>e.value)))})))),this._promises.groups):Promise.reject(K)}getHostInfo(e,t){return e.startsWith(e)||(e+="system.host."+e),!t&&this._promises["hostInfo"+e]?this._promises["hostInfo"+e]:this.connected?(this._promises["hostInfo"+e]=new Promise(((t,s)=>{let o=setTimeout((()=>{o&&(o=null,s("timeout"))}),5e3);this._socket.emit("sendToHost",e,"getHostInfo",null,(e=>{o&&(clearTimeout(o),o=null,e===z?s('May not read "getHostInfo"'):e?t(e):s('Cannot read "getHostInfo"'))}))})),this._promises["hostInfo"+e]):Promise.reject(K)}getRepository(e,t,s){return!s&&this._promises.repo?this._promises.repo:this.connected?(e.startsWith(e)||(e+="system.host."+e),this._promises.repo=new Promise(((s,o)=>{let i=setTimeout((()=>{i&&(i=null,o("timeout"))}),5e3);this._socket.emit("sendToHost",e,"getRepository",t,(e=>{i&&(clearTimeout(i),i=null,e===z?o('May not read "getRepository"'):e?s(e):o('Cannot read "getRepository"'))}))})),this._promises.repo):Promise.reject(K)}getInstalled(e,t){return!t&&this._promises.installed?this._promises.installed:this.connected?(e.startsWith(e)||(e+="system.host."+e),this._promises.installed=new Promise(((t,s)=>{let o=setTimeout((()=>{o&&(o=null,s("timeout"))}),5e3);this._socket.emit("sendToHost",e,"getInstalled",null,(e=>{o&&(clearTimeout(o),o=null,e===z?s('May not read "getInstalled"'):e?t(e):s('Cannot read "getInstalled"'))}))})),this._promises.installed):Promise.reject(K)}cmdExec(e,t,s){return this.connected?(e.startsWith(e)||(e+="system.host."+e),new Promise(((o,i)=>{let r=setTimeout((()=>{r&&(r=null,i("timeout"))}),5e3);this._socket.emit("cmdExec",e,s,t,null,(e=>{r&&(clearTimeout(r),r=null,e?i(e):o())}))}))):Promise.reject(K)}checkFeatureSupported(e,t){return!t&&this._promises["supportedFeatures_"+e]?this._promises["supportedFeatures_"+e]:this.connected?(this._promises["supportedFeatures_"+e]=new Promise(((t,s)=>this._socket.emit("checkFeatureSupported",e,((e,o)=>{console.log(o),e?s(e):t(o)})))),this._promises["supportedFeatures_"+e]):Promise.reject(K)}readBaseSettings(e){return this.checkFeatureSupported("CONTROLLER_READWRITE_BASE_SETTINGS").then((t=>t?this.connected?new Promise(((t,s)=>{let o=setTimeout((()=>{o&&(o=null,s("timeout"))}),5e3);this._socket.emit("sendToHost",e,"readBaseSettings",null,(e=>{o&&(clearTimeout(o),o=null,e===z?s('May not read "BaseSettings"'):e?t(e):s('Cannot read "BaseSettings"'))}))})):Promise.reject(K):Promise.reject("Not supported")))}writeBaseSettings(e,t){return this.checkFeatureSupported("CONTROLLER_READWRITE_BASE_SETTINGS").then((s=>s?this.connected?new Promise(((s,o)=>{let i=setTimeout((()=>{i&&(i=null,o("timeout"))}),5e3);this._socket.emit("sendToHost",e,"writeBaseSettings",t,(e=>{i&&(clearTimeout(i),i=null,e===z?o('May not write "BaseSettings"'):e?s(e):o('Cannot write "BaseSettings"'))}))})):Promise.reject(K):Promise.reject("Not supported")))}getForeignStates(e){return this.connected?new Promise(((t,s)=>this._socket.emit("getForeignStates",e||"*",((e,o)=>e?s(e):t(o))))):Promise.reject(K)}getForeignObjects(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("getForeignObjects",e||"*",t,((e,t)=>e?o(e):s(t))))):Promise.reject(K)}getSystemConfig(e){return e&&(this._promises.systemConfig=null),this._promises.systemConfig||this.connected?(this._promises.systemConfig=this._promises.systemConfig||this.getObject("system.config").then((e=>(e=e||{},e.common=e.common||{},e.native=e.native||{},e))),this._promises.systemConfig):Promise.reject(K)}setSystemConfig(e){return this.setObject("system.config",e).then((()=>this._promises.systemConfig=Promise.resolve(e)))}getRawSocket(){return this._socket}getHistory(e,t){return this.connected?new Promise(((s,o)=>this._socket.emit("getHistory",e,t,((e,t)=>e?o(e):s(t))))):Promise.reject(K)}changePassword(e,t){return new Promise(((s,o)=>this._socket.emit("changePassword",e,t,(e=>e?o(e):s()))))}getIpAddresses(e,t){return e.startsWith("system.host.")||(e="system.host."+e),!t&&this._promises["IPs_"+e]||(this._promises["IPs_"+e]=this.getObject(e).then((e=>e&&e.common&&e.common.address||[]))),this._promises["IPs_"+e]}decryptPhrase(e){return new Promise(((t,s)=>this._socket.emit("decryptPhrase",e,((e,o)=>e?s(e):t(o)))))}encryptPhrase(e){return new Promise(((t,s)=>this._socket.emit("encryptPhrase",e,((e,o)=>e?s(e):t(o)))))}encrypt(e){return new Promise(((t,s)=>this._socket.emit("encrypt",e,((e,o)=>e?s(e):t(o)))))}decrypt(e){return new Promise(((t,s)=>this._socket.emit("decrypt",e,((e,o)=>e?s(e):t(o)))))}getAdminVersion(){return this._promises.version=this._promises.version||new Promise(((e,t)=>this._socket.emit("getVersion",((s,o)=>s?t(s):e(o))))),this._promises.version}}var Q=U;class Z{constructor(e,t){this.store=e.store,this.state=e.store.state.template;const s=(window.location.search||"").replace(/^\?/,"").replace(/#.*$/,""),o={};s.trim().split("&").filter((e=>e)).forEach((e=>{const t=e.split("=");o[t[0]]=2!==t.length||t[1]})),this.instance=void 0!==o.instance?parseInt(o.instance,10)||0:parseInt(window.location.search.slice(1),10)||0;const i=window.location.pathname.split("/");this.adapterName=t&&t.adapterName||e.adapterName||window.adapterName||i[i.length-2]||"iot",console.log("Adapter Name:",this.adapterName),this.instanceId=`system.adapter.${this.adapterName}.${this.instance}`,this.selectedTab=window.localStorage[this.adapterName+"-adapter"]||"",this.selectedTabNum=-1;try{this.isIFrame=window.self!==window.top}catch(r){this.isIFrame=!0}this.savedNative={},this.encryptedFields=e.encryptedFields||t&&t.encryptedFields||[],this.socket=new Q(g()(g()({},e&&e.socket||t&&t.socket),{},{name:this.adapterName,doNotLoadAllObjects:t&&t.doNotLoadAllObjects,onProgress:e=>{e===W.CONNECTING?this.store.commit("app/updateField",{path:"connected",value:!1}):(W.READY,this.store.commit("app/updateField",{path:"connected",value:!0}))},onReady:(e,t)=>{M.locale=this.socket.systemLang,this.getSystemConfig().then((e=>(this._secret="undefined"!==typeof e&&e.native&&e.native.secret||"Zgfr56gFe87jJOM",this.socket.getObject(this.instanceId)))).then((e=>{e?(this.common=e&&e.common,this.onPrepareLoad(e.native),this.native=JSON.parse(JSON.stringify(e.native)),this.savedNative=JSON.parse(JSON.stringify(e.native)),this.store.commit("template/updateField",{path:"native",value:e.native}),this.store.commit("app/updateField",{path:"loaded",value:!0}),this.onConnectionReady&&this.onConnectionReady()):(console.warn("Cannot load instance settings"),this.store.commit("template/updateField",{path:"native",value:{}}),this.store.commit("app/updateField",{path:"loaded",value:!0}),this.onConnectionReady&&this.onConnectionReady())}))},onError:e=>{this.showError(e)}}))}getSystemConfig(){return this.socket.objects&&this.socket.objects["system.config"]?Promise.resolve(this.socket.objects["system.config"]):this.socket.getObject("system.config")}onPrepareLoad(e){this.encryptedFields&&this.encryptedFields.forEach((t=>{e[t]&&(e[t]=this.decrypt(e[t]))}))}onPrepareSave(e){this.encryptedFields&&this.encryptedFields.forEach((t=>{e[t]&&(e[t]=this.encrypt(e[t]))}))}getExtendableInstances(){return new Promise((e=>{this.socket.socket.emit("getObjectView","system","instance",null,((t,s)=>{e(t?[]:s.rows.filter((e=>e.value.common.webExtendable)).map((e=>e.value)))}))}))}getIpAddresses(e){return new Promise(((t,s)=>{this.socket.socket.emit("getHostByIp",e||this.common.host,((s,o)=>{const i=[{name:"[IPv4] 0.0.0.0 - "+M.t("Listen on all IPs"),address:"0.0.0.0",family:"ipv4"}],r=[{name:"[IPv6] ::",address:"::",family:"ipv6"}];o&&(e=o,e.native.hardware&&e.native.hardware.networkInterfaces&&Object.keys(e.native.hardware.networkInterfaces).forEach((t=>e.native.hardware.networkInterfaces[t].forEach((e=>{"IPv6"!==e.family?i.push({name:`[${e.family}] ${e.address} - ${t}`,address:e.address,family:"ipv4"}):r.push({name:`[${e.family}] ${e.address} - ${t}`,address:e.address,family:"ipv6"})})))),r.forEach((e=>i.push(e)))),t(i)}))}))}getIsChanged(e){e=e||this.state.native;const t=JSON.stringify(e)!==JSON.stringify(this.savedNative);return window.changed=!!t,t}decrypt(e){let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(this._secret[s%this._secret.length].charCodeAt(0)^e.charCodeAt(s));return t}encrypt(e){let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(this._secret[s%this._secret.length].charCodeAt(0)^e.charCodeAt(s));return t}selectTab(e,t){window.localStorage[this.adapterName+"-adapter"]=e,this.selectedTab=e,this.selectedTabNum=t}onLoadConfig(e){JSON.stringify(e)!==JSON.stringify(this.state.native)&&(this.store.commit("template/updateField",{path:"native",value:e}),this.store.commit("app/updateField",{path:"changed",value:this.getIsChanged(e)}))}onSave(e){let t;this.state.isConfigurationError?this.store.commit("app/updateField",{path:"errorText",value:this.state.isConfigurationError}):this.socket.getObject(this.instanceId).then((e=>{t=e||{};for(const s in this.state.native)this.state.native.hasOwnProperty(s)&&(t.native[s]=this.state.native[s]);if(this.state.common)for(const s in this.state.common)this.state.common.hasOwnProperty(s)&&(t.common[s]=this.state.common[s]);return this.onPrepareSave(t.native),this.socket.setObject(this.instanceId,t)})).then((()=>{this.savedNative=JSON.parse(JSON.stringify(t.native)),this.store.commit("app/updateField",{path:"changed",value:!1}),window.changed=!1,e&&Z.onClose()}))}static onClose(){if("undefined"!==typeof window.parent&&window.parent)try{window.parent.$iframeDialog&&"function"===typeof window.parent.$iframeDialog.close?window.parent.$iframeDialog.close():window.parent.postMessage("close","*")}catch(e){window.parent.postMessage("close","*")}}showError(e){this.store.commit("app/updateField",{path:"errorText",value:e})}setConfigurationError(e){this.state.isConfigurationError!==e&&this.store.commit("app/updateField",{path:"isConfigurationError",value:e})}static generateFile(e,t){const s=window.document.createElement("a");s.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2))),s.setAttribute("download",e),s.style.display="none",window.document.body.appendChild(s),s.click(),window.document.body.removeChild(s)}handleFileSelect(e){const t=e.target.files[0];if(t){const e=new window.FileReader;e.onload=e=>{const t=e.target.result;try{const e=JSON.parse(t);e.native&&e.common?e.common.name!==this.common.name?this.showError(M.t("otherConfig",{msg:e.common.name})):this.onLoadConfig(e.native):this.showError(M.t("invalidConfig"))}catch(e){this.showError(e.toString())}},e.readAsText(t)}else this.showError("Failed to open JSON File")}download(){const e={_id:`system.adapter.${this.common.name}.${this.instance}`,common:JSON.parse(JSON.stringify(this.common)),native:this.native};e.common.news&&delete e.common.news,e.common.titleLang&&delete e.common.titleLang,e.common.desc&&delete e.common.desc,Z.generateFile(e._id+".json",e)}upload(){const e=window.document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","files"),e.setAttribute("opacity",0),e.addEventListener("change",(e=>this.handleFileSelect(e,(()=>{}))),!1),e.click()}}var X=Z,ee=async({Vue:e,store:t})=>{const s={adapterName:"template-vue",encryptedFields:["pass"],socket:{port:parseInt(window.location.port,10)},store:t};8080===s.socket.port&&(s.socket.port=8081),e.prototype.$connection=new X(s),e.prototype.$onClose=X.onClose};const te="";async function se(){const{app:e,store:t,router:s}=await D();let o=!1;const i=e=>{o=!0;const t=Object(e)===e?s.resolve(e).route.fullPath:e;window.location.href=t},r=window.location.href.replace(window.location.origin,""),n=[Y,ee];for(let h=0;!1===o&&h<n.length;h++)if("function"===typeof n[h])try{await n[h]({app:e,router:s,store:t,Vue:a["a"],ssrContext:null,redirect:i,urlPath:r,publicPath:te})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==o&&new a["a"](e)}se()},"4dd9":function(e,t){},9446:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var o=s("ded3"),i=s.n(o),r=s("2f62");const n={computed:i()({},Object(r["c"])("template",["native"]))}},"9d7a":function(e,t,s){e.exports=s.p+"img/iobroker-progress.ac036256.png"},d35b:function(e,t,s){var o=s("24fb");t=o(!1),t.push([e.i,"",""]),e.exports=t},e048:function(e,t){}});